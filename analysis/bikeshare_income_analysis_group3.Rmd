---
title: "Group 3 Project"
output: html_notebook
---

```{r}
library(lehdr)
library(dplyr)
library(knitr)
library(tidyverse)
library(janitor)
library(lubridate)
library(here)
library(sf)
library(tmap)
library(tidycensus)
library(plotly)
library(ggforce)
library(tigris)
```


```{r}
census_api_key("260b47c83abf4017c26b5022527d1558744b41cf", overwrite = TRUE)
v20 = load_variables(2018,"acs5")
```
```{r}
df_census_3=get_acs(geography = "tract",
                  variables=c("median_income" = "B19013_001"),
                  state="DC",geometry=TRUE,year=2018) 
df_cens=df_census %>% select(-moe) %>% spread(variable,estimate) 
```
```{r}
bikeshare <- read_csv(here("data_raw", "202209-capitalbikeshare-tripdata.zip"))
```
```{r}
median_inc <- df_census_3 %>% select(1,4,6)
bikeshare_start <- bikeshare %>% select(6,9,10)
```

```{r}
neigh = st_read(here("data_raw","dc_neigh.geojson")) %>% clean_names()
```
```{r}
bikeshare_start_join = st_join(bikeshare_start,neigh,largest=TRUE)
```



```{r}

```



```{r}
tmap_mode("view")

df_census=get_acs(geography = "tract",
                  variables=c("under_10000"="B19001_002", 
                              "10000_to_14999"="B19001_003", 
                              "15000_to_19999"="B19001_004", 
                              "20000_to_24999"="B19001_005", 
                              "25000_to_29999"="B19001_006", 
                              "30000_to_34999"="B19001_007", 
                              "35000_to_39999"="B19001_008", 
                              "40000_to_44999"="B19001_009", 
                              "45000_to_49999"="B19001_010", 
                              "50000_to_59999"="B19001_011", 
                              "60000_to_74999"="B19001_012", 
                              "75000_to_99999"="B19001_013",
                              "100000_to_124999"="B19001_014", 
                              "125000_to_149999"="B19001_015", 
                              "150000_to_199999"="B19001_016", 
                              "200000_or_more"="B19001_017"),
                  state="DC",geometry=TRUE,year=2018) 
df_cens=df_census %>% select(-moe) %>% spread(variable,estimate) 
```
```{r}
ggplot(data=df_census, mapping=aes(x=variable)) + geom_bar(aes(weight=estimate)) + theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+ facet_wrap_paginate(~GEOID, nrow = 3, ncol = 3, page = 1)
```


```{r}
ggplot(data=df_census, mapping=aes(x=variable)) + geom_bar(aes(weight=estimate)) + theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+ facet_wrap_paginate(~GEOID, nrow = 3, ncol = 3, page = 1)
ggplot(data=df_census, mapping=aes(x=variable)) + geom_bar(aes(weight=estimate)) + facet_wrap_paginate(~GEOID, nrow = 3, ncol = 3, page = 2)
ggplot(data=df_census, mapping=aes(x=variable)) + geom_bar(aes(weight=estimate)) + facet_wrap_paginate(~GEOID, nrow = 3, ncol = 3, page = 3)
ggplot(data=df_census, mapping=aes(x=variable)) + geom_bar(aes(weight=estimate)) + facet_wrap_paginate(~GEOID, nrow = 3, ncol = 3, page = 4)
ggplot(data=df_census, mapping=aes(x=variable)) + geom_bar(aes(weight=estimate)) + facet_wrap_paginate(~GEOID, nrow = 3, ncol = 3, page = 5)
ggplot(data=df_census, mapping=aes(x=variable)) + geom_bar(aes(weight=estimate)) + facet_wrap_paginate(~GEOID, nrow = 3, ncol = 3, page = 6)
ggplot(data=df_census, mapping=aes(x=variable)) + geom_bar(aes(weight=estimate)) + facet_wrap_paginate(~GEOID, nrow = 3, ncol = 3, page = 7)
ggplot(data=df_census, mapping=aes(x=variable)) + geom_bar(aes(weight=estimate)) + facet_wrap_paginate(~GEOID, nrow = 3, ncol = 3, page = 8)
ggplot(data=df_census, mapping=aes(x=variable)) + geom_bar(aes(weight=estimate)) + facet_wrap_paginate(~GEOID, nrow = 3, ncol = 3, page = 9)
ggplot(data=df_census, mapping=aes(x=variable)) + geom_bar(aes(weight=estimate)) + facet_wrap_paginate(~GEOID, nrow = 3, ncol = 3, page = 10)
ggplot(data=df_census, mapping=aes(x=variable)) + geom_bar(aes(weight=estimate)) + facet_wrap_paginate(~GEOID, nrow = 3, ncol = 3, page = 11)
ggplot(data=df_census, mapping=aes(x=variable)) + geom_bar(aes(weight=estimate)) + facet_wrap_paginate(~GEOID, nrow = 3, ncol = 3, page = 12)
ggplot(data=df_census, mapping=aes(x=variable)) + geom_bar(aes(weight=estimate)) + facet_wrap_paginate(~GEOID, nrow = 3, ncol = 3, page = 13)
ggplot(data=df_census, mapping=aes(x=variable)) + geom_bar(aes(weight=estimate)) + facet_wrap_paginate(~GEOID, nrow = 3, ncol = 3, page = 14)
ggplot(data=df_census, mapping=aes(x=variable)) + geom_bar(aes(weight=estimate)) + facet_wrap_paginate(~GEOID, nrow = 3, ncol = 3, page = 15)
ggplot(data=df_census, mapping=aes(x=variable)) + geom_bar(aes(weight=estimate)) + facet_wrap_paginate(~GEOID, nrow = 3, ncol = 3, page = 16)
ggplot(data=df_census, mapping=aes(x=variable)) + geom_bar(aes(weight=estimate)) + facet_wrap_paginate(~GEOID, nrow = 3, ncol = 3, page = 17)
ggplot(data=df_census, mapping=aes(x=variable)) + geom_bar(aes(weight=estimate)) + facet_wrap_paginate(~GEOID, nrow = 3, ncol = 3, page = 18)
ggplot(data=df_census, mapping=aes(x=variable)) + geom_bar(aes(weight=estimate)) + facet_wrap_paginate(~GEOID, nrow = 3, ncol = 3, page = 19)
ggplot(data=df_census, mapping=aes(x=variable)) + geom_bar(aes(weight=estimate)) + facet_wrap_paginate(~GEOID, nrow = 3, ncol = 3, page = 20)
```

```{r}

```


B19013_001

income in census
less than  $20,000
$20,000 to $34,999
$35,000 to $49,999
$50,000 to $74,999
$75,000 to $99,999
$100,000 to $149,999
$150,000 or more

#Do "rich" neighborhoods bike-share differently than poor?
##Game plan
- define differently, rich, and poor
- Does resident income or worker income affect bikeshare in a neighborhood more?
- Different ways to measure income. Mean 
    - Distributions of income as opposed to single value
- Look at v20 dataset
    - have some categories broken down into income brackets
    - how many people are in each bracket 
    - you can pull how many households, people... in block
        - there may be breakdown of individuals, as well as households
        - now we have essentially two histograms want to show
            - can draw histogram for any census block
            - can either plot histogram side by side
            - look at histograms, see what's there. If you see other characteristics, it will give you a perspective of approach  
- Compare visually, pull data of breakdown things then see how they are different


B19013A_001
B19013B_001
"median_inc"="B06011_001"



















